{% extends 'base.html' %} {% block content %}
<div class="register_page"></div>
<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h2 class="text-center text-success mb-4">Register</h2>
      <form
        method="POST"
        enctype="multipart/form-data"
        class="bg-dark p-4 rounded shadow"
      >
        {% csrf_token %}

        <div class="mb-3">
          <input
            type="text"
            name="user_name"
            class="form-control"
            placeholder="Username"
            required
          />
        </div>
        <div class="mb-3">
          <input
            type="email"
            name="email"
            class="form-control"
            placeholder="Email"
            required
          />
        </div>
        <div class="mb-3">
          <input
            type="password"
            name="password"
            class="form-control"
            placeholder="Password"
            required
          />
        </div>

        <div class="mb-3">
          <label for="profile_pic">Profile Picture (optional)</label>
          <input
            type="file"
            name="profile_pic"
            class="form-control"
            placeholder="Profile Picture"
          />
        </div>

        <div class="mb-3">
          <select name="role" class="form-select" id="roleSelect">
            <option value="" disabled selected>Select Role</option>
            <option value="student">Student</option>
            <option value="teacher">Teacher</option>
          </select>
        </div>
        <div class="mb-3">
          <textarea
            name="address"
            class="form-control"
            placeholder="Address"
          ></textarea>
        </div>
        <div class="mb-3">
          <input type="date" name="dob" class="form-control" required />
        </div>
        <div class="mb-3">
          <input type="file" name="profile_pic" class="form-control" />
        </div>
        <div class="mb-3">
          <input
            type="text"
            name="phone_number"
            class="form-control"
            placeholder="Phone Number"
            required
          />
        </div>
        <div class="mb-3">
          <select name="gender" class="form-control" required>
            <option value="" disabled selected>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <!-- Student Fields -->
        <div id="student-fields">
          <div class="mb-3">
            <input
              type="text"
              name="guardian_name"
              class="form-control"
              placeholder="Guardian Name"
            />
          </div>
          <div class="mb-3">
            <input
              type="text"
              name="guardian_contact"
              class="form-control"
              placeholder="Guardian Contact"
            />
          </div>
        </div>

        <!-- Teacher Fields -->
        <div id="teacher-fields">
          <div class="mb-3">
            <input
              type="text"
              name="qualification"
              class="form-control"
              placeholder="Qualification"
            />
          </div>
          <div class="mb-3">
            <input
              type="text"
              name="skills"
              class="form-control"
              placeholder="Skills"
            />
          </div>
          <div class="mb-3">
            <input
              type="text"
              name="experience"
              class="form-control"
              placeholder="Experience"
            />
          </div>
        </div>

        <div class="d-grid mb-3">
          <button type="submit" class="btn btn-primary">Register</button>
        </div>
        <p class="text-white text-center">
          Already have an account? <a href="{% url 'login' %}">Login</a>
        </p>

        {% if error %}
        <p class="text-danger text-center">{{ error }}</p>
        {% endif %}

        <script>
          const roleSelect = document.getElementById("roleSelect");
          const studentFields = document.getElementById("student-fields");
          const teacherFields = document.getElementById("teacher-fields");

          function toggleFields() {
            if (roleSelect.value === "student") {
              studentFields.style.display = "block";
              teacherFields.style.display = "none";
            } else {
              studentFields.style.display = "none";
              teacherFields.style.display = "block";
            }
          }
          roleSelect.addEventListener("change", toggleFields);
          document.addEventListener("DOMContentLoaded", toggleFields);
        </script>
      </form>
    </div>
  </div>
</div>

{% endblock %}
